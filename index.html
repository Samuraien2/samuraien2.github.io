<!DOCTYPE html><head><link rel="icon"href=".ico"></head><body><canvas id="c"width="800"height="600"style="background-color:#333;"></canvas><script>const ctx=document.getElementById("c").getContext("2d"),gameWidth=800,gameHeight=600,playerSize=36,SMALL_ZOMBIE_SIZE=50,LARGE_ZOMBIE_SIZE=200,zombie_rewards=[1,1,2,5,20,5,10],zombie_speeds=[0,0,1.2,1.2,-1.54],TOTAL_ZOMBIES=3,zombie_cooldowntimes=[90,150,230],imageUrls=["skins/heart.png",];let x,y,leftKeyDown=!1,rightKeyDown=!1,upKeyDown=!1,downKeyDown=!1,zombieSpeed=1,playerSpeed=3,gameState=0,lastDistCheck=0,zombie_cooldowns=[],zombie_destinations=[],zombie_type=[],zombie_x=[],zombie_y=[],zombie_hp=[],mouseX=0,mouseY=0,score=0,distance=0,endless=!1;function loadImage(e){return new Promise((o,i)=>{let t=new Image;t.onload=()=>o(t),t.onerror=i,t.src=e})}function titleScreen(){gameState=0}function startGame(){x=382,y=282,gameState=1,score=0,zombie_cooldowns=[...zombie_cooldowntimes],endless=!1,zombieSpeed=1,playerSpeed=3,gameFrame()}function gameFrame(){ctx.clearRect(0,0,800,600),mouseDistance(),zombieSpawnTick(),movePlayer(),processZombies(),drawZombies(),drawPlayer(),1===gameState&&requestAnimationFrame(gameFrame)}function zombieSpawnTick(){for(let e=0;e<3;e++)zombie_cooldowns[e]--,0===zombie_cooldowns[e]&&(zombie_cooldowns[e]=zombie_cooldowntimes[e],zombie_type.push(e),1===e?zombie_hp.push(2):2===e?zombie_hp.push(0):zombie_hp.push(1),regularRandomSpawn(Math.floor(4*Math.random())))}function mouseDistance(){0===lastDistCheck?lastDistCheck=4:lastDistCheck--}function touchingZombies(){for(let e=zombie_type.length-1;e>=0;e--)if(mouseTouchingRect(zombie_x[e],zombie_y[e],50,50)){1===zombie_hp[e]||2===zombie_type[e]?killZombie(e):(zombie_hp[e]--,zombie_type[e]);break}}function killZombie(e){zombie_type.splice(e,1),zombie_x.splice(e,1),zombie_y.splice(e,1),zombie_hp.splice(e,1)}function mouseTouchingRect(e,o,i,t){return!(mouseX<e)&&!(mouseX>e+i)&&!(mouseY<o)&&!(mouseY>o+t)}function squaresTouching(e,o,i,t,m,n){return!(e>t+n)&&!(e+i<t)&&!(o>m+n)&&!(o+i<m)}function movePlayer(){downKeyDown&&(y+=playerSpeed),upKeyDown&&(y-=playerSpeed),leftKeyDown&&(x-=playerSpeed),rightKeyDown&&(x+=playerSpeed),y<0?y=0:y>564&&(y=564),x<0?x=0:x>764&&(x=764)}function regularRandomSpawn(e){switch(e){case 0:zombie_x.push(800*Math.random()),zombie_y.push(-50);break;case 1:zombie_x.push(800*Math.random()),zombie_y.push(600);break;case 2:zombie_x.push(-50),zombie_y.push(600*Math.random());break;default:zombie_x.push(800),zombie_y.push(600*Math.random())}}function drawPlayer(){ctx.fillStyle="#B838E5",ctx.drawImage(imgs[0],x,y,36,36)}function drawZombies(){for(let e=0;e<zombie_type.length;e++)1===zombie_type[e]&&2===zombie_hp[e]?ctx.fillStyle="#267F00":2===zombie_type[e]?(ctx.globalAlpha=zombie_hp[e]/200,ctx.fillStyle="#FFE97F"):ctx.fillStyle="#2D9900",ctx.fillRect(zombie_x[e],zombie_y[e],50,50),ctx.globalAlpha=1}function processZombies(){for(let e=0;e<zombie_type.length;e++){let o=x-zombie_x[e]+-7,i=y-zombie_y[e]+-7,t=(zombieSpeed+zombie_speeds[zombie_type[e]])/Math.sqrt(o*o+i*i);zombie_x[e]+=t*o,zombie_y[e]+=t*i,squaresTouching(x,y,36,zombie_x[e],zombie_y[e],50)&&(console.log("--- LOST ---"),gameState=0),2===zombie_type[e]&&200!=zombie_hp[e]&&zombie_hp[e]++}}Promise.all(imageUrls.map(e=>loadImage(e))).then(e=>{function o(e){let o=e.keyCode,i="keydown"===e.type;switch(o){case 87:upKeyDown=i;break;case 65:leftKeyDown=i;break;case 83:downKeyDown=i;break;case 68:rightKeyDown=i}}document.body.addEventListener("keydown",o),document.body.addEventListener("keyup",o),document.body.addEventListener("mousedown",()=>{touchingZombies()}),document.body.addEventListener("mousemove",e=>{mouseX=e.offsetX,mouseY=e.offsetY}),ctx.imageSmoothingEnabled=!1,imgs=e,startGame()});</script></body>